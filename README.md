# my-white-whale
A journey to build more environmentally-friendly LED lighting ... which turned into an obsession

![Illuminated LED Lighting](/images/analog-FOUND-IT-blingstar-solar-christmas-lights-LED-string-retrofit-IMG_0114-led-lights-illuminated-20220226.JPG)

# How on earth did I get here?
The last thing I remember hearing before tumbling down the hole was "_I'm late, I'm late! For a very important date! No time to say 'hello, goodbye,' I'm late, I'm late, I'm late!_".

We added a small covered open-air sitting area over our patio, and thought it would be nice to add some lighting for when sitting outside in the evening.  It was a conscious decision to not added outdoor electricity, to stay within budget and maintain the aesthetics.  The sitting area faces north, and gets very little sunlight, particularly during winter; initially solar-powered lighting did not seem like an option, but more on that later.

So the conclusion was to purchase some battery-powered LED lighting.  The product needed to be designed for outdoor usage, across all seasons' temperatures, and reasonably waterproof.  Optionally detecting darkness to turn on the lighting would be ideal, but the product must have a built-in timer, to extend the life of the batteries vs. the lighting on through the night.  Finally, the larger the battery type, the better.

Oh, and the product needed to be modestly priced, as I would need multiple strands of lighting to achieve the desired effect.  Plus being outdoors, invariably there would be failures that would need replacements.

# Iteration #1: Purchase batteries in bulk

In the end, most of the requirements could be met, but not all of them.  I found an LED lighting unit which does not have the darkness-on, but it does have a 6-hour on / 18-hour off timer.  It is designed for outdoor use and is reasonably sturdy and waterproof.

There are multiple lighting modes, such as alternating blinking, fade in and out, flashing which was just annoying and steady-on.

Being a simple man, we went with steady-on.

The lighting unit is operated by three "AA" batteries, at 4.5 Volts total.

In order to wrap around the two outdoor columns, plus across the span, i needed a total of three LED lighting units.

I wondered: how long can three batteries last with LED lights steady-on for six hours each day.

I was somewhat surprised that the batteries actually lasted for about one month.

I thought "_At first I thought, that's not too bad ..._", swapped in three fresh "AA" batteries, times three lighting units so nine batteries total, reset the timer, and we were back in business.

But after a few months, I had this not-so-small pile of dead "AA" batteries.  Our town has a yard where they can be properly disposed, so we dropped them off.

A little while later, I sort-of felt guilty about the waste.

Being a degreed Electrical Engineer, there was only one thing to do: find a better way.

"_There must be a way to convert these LED lighting units to solar._"

But how?  I still have the same problem: minimal direct sunlight on the nort-facing side of the house.  And mounting a solar panel in such a way to obtain the needed sunlight would either be aesthetically-unpleasant, and most-likely susceptible to damage in high winds, ice/snow storms, and other inclement weather.

I also discovered how expensive good solar panels with high holding capacity can cost!

"_There must be a way ..._"

So I did something completely out of character for me: I set the problem aside and focused on other projects which were interesting and would help me maintain some semblence of sanity during the COVID-19 lockdown.  My normal modus-operandi is to just press harder on the challenge until victory, but instead I decided to just take a break from all this.

# The first of potentially many tangential detours ... 

The holidays were approaching, and we didn't want our house to look like the Grinch lived here.  The front of our house faces south, and gets soaked with sunshine even in the winter - even more-so with snow providing reflection of the sunlight.

So time to purchase more LED lighting, with all the same requirements as for the back patio area lighting, except would be powered by solar.

To my pleasant surprise, i was able to find an LED lighting unit which met all the requirements, including darkness-on with a timer.

It even came with a remote control.

"_A what?_"

A remote control.

"_I'm a simple man ... why on earth do i need a remote control for my outdoor lighting?_"

But there it was.  I even tried to find a simpler, even less expensive product sans remote control.

Nope ... "_No soup for you!_" ... Take it with the remote control or move along ...

Sigh ... OK.

We had gotten a cold spell just before the front yard LED lights arrived.  Most other homes already had their holiday lights installed.  I swear I heard one of the younger kids in the neighborhood, while waiting for the school bus, say "_Mommy, does the Grinch live in that house?_" to-which she replied "_Yes, I believe he does._"

OK, time to get busy.

The solar LED lights arrived a couple days later, just enough time for the ground to turn to granite.  I unboxed the lights, which came with a small, say 6 inch, plastic spike which goes into the ground, and then there is an adjustable mounting bracket which goes from the spike to the solar cell which powers and controls the lighting.

I went outside, stretched out all the LEDs all over the front yard to untwist the wires, then knelt down to push the spike into the ground.  I mentioned the cold spell right?  "_Hmmm ... ground's pretty hard from the cold_".

I carefully inspected the plastic spike.  It seemed pretty sturdy.  "_It's probably just the very top of the ground that's frozen, so I'll just apply steadily increasing pressure until this spike breaks through to soft soil_".

I was using my normal modus operandi.

"_SNAP!!!_"

Sigh.

However, i had purchased a spare lighting unit for the front yard.  In our house, we have a saying: "_Pair and a spare_".  So went inside and opened another lighting unit package.  I got the largest, scary screwdriver I own, a hammer, and for good measure but thankfully unnecessary, the propane torch.  I will not be defeated by cold weather!  After creating a pilot hole, with the screwdriver and hammer, i sucessfully installed the front solar lights, coiling the LEDs artistically around the front bushes (it actually required two strings of lights to propose a nice display.)

That night I went to the window, and was shocked to discover that there was NO illumination!

"_A-Ha_" I said: I bet the battery in the solar cell was not charged, and I installed the lighting mid-late day.  Sure enough, the next evening we had lighting.

A couple days later: "_Mommy, did the Grinch move out of that house over there?_", to-which she replied "_Yes, I believe he did._"

A few days went by and we got our first snowfall.  I thought "_Our front lights will look so nice!_", and they did that evening.

And the next.

The third evening i went to the front window to admire my hard work and ... nothing.

No illumination reflecting gently against the evening snow.

Everyone other house's lights were on (I can already hear that kid saying "_Mommy ..._").

It was late, cold, and really no reason to go outside now in the darkness.  Better to mount an investigation in the morning.

The next day, the issue was apparent: the snow we received covered most of the solar cell, so no sunlight was getting to it.  You see, the plastic spike may be 6 inches long, but most of it goes into the ground, essentially placing the solar cells at ground level.  Add a few inches of snow and voila', no sunshine recharging the internal battery, thus no illumination.

No problem: I'll simply unbury the solar cell with my snow shovel, wide enough to ensure maximum sunlight hitting it.

I grabbed my trusty shovel, began carefully scraping back the snow to try to expose the solar cell.  Victory!

Remember how I mentioned earlier that it took two strings of lighting to get the desired effect: no problem, I'll just dig-out the other solar cell from the snow, so it can charge it's battery also.

"_Hmmm ... I think the other solar cell is right about here, so I'll just gently push the snow shovel like this until I feel the spike_"

I forgot that cold temperatures make plastic brittle.

"_SNAP!!!_"

Sigh.

OK.  I actually have one more set of lighting, and I'll use the spike from that package to replace the one I just broke.

Bingo.

That evening, I was rewarded with illumination.  Victory.  I will not be defeated.  Take that kid.

And then it snowed again.

Three days later: nothing.  Nada.  Darkness.

Not to be deterred, the answer was obvious:

![Front yard elevated solar panels](/images/analog-FOUND-IT-blingstar-solar-christmas-lights-LED-string-retrofit-IMG_0111-solarcells-on-dowels-outside-20220226.JPG)

# Returning to the main road, for now ... 

The holidays were, well, strange ... due to COVID.  We did manage to carefully spend time with some family, but as with everyone in the world, we were all impacted, and not in a good way.

With some spare time after the holidays, I returned to my back yard lighting conundrum.  How to obtain back yard patio illumination while being environmentally friendly and responsible?

# Iteration #2A: Hacking the solar panel

Stand-alone solar cells were pretty expensive, though had impressive charge capacity thus long light.  But even if I make that investment, i really have no aesthetic and durable installation mechanism.  Thinking back on the front yard saga, an answer was immediately: "_Might it be possible to find some way to use the front yard solar cells to power the back yard LED lights?_"

Afterall, I have two front yard lighting sets' solar cells which have two broken spikes ... maybe i can use those ... somehow?

Engineers which I know only love one thing more than creating something ... and that's taking something someone else created, cracking it open, and figuring out how it works.  Gold medal to the engineer who can also put it back together and it still work, albeit with the obligitory "one apparently extra and unnecessary screw still sitting on the workbench" outcome, which for many of us is unavoidable.

Grabbing a less-scary screwdriver, I carefully opened one of the spare solar cells.  To my joy, it was relatively straight-forward to reverse-engineer (AKA "Hack").  I pretty quickly discovered that it was not difficult to remove a few mechanical and electronic components, isolating most of the electronics that ran the front yard lights (including the remote control receiver circuitry ... I still say "_Really?_"), producing a simple solar powered battery charger.

![Hacked solar panel battery charger](/images/analog-FOUND-IT-blingstar-solar-christmas-lights-LED-string-retrofit-IMG_0001-solarcell-hacking-01-20210511.JPG)

![Hacked solar panel battery charger](/images/analog-FOUND-IT-blingstar-solar-christmas-lights-LED-string-retrofit-IMG_0006-solarcell-hacking-02-20210511.JPG)

![Hacked solar panel battery charger](/images/analog-FOUND-IT-blingstar-solar-christmas-lights-LED-string-retrofit-IMG_0008-solarcell-hacking-03-20210511.JPG)

![Hacked solar panel battery charger](/images/analog-FOUND-IT-blingstar-solar-christmas-lights-LED-string-retrofit-IMG_0014-solarcell-hacking-04-20210511.JPG)

![Hacked solar panel battery charger](/images/analog-FOUND-IT-blingstar-solar-christmas-lights-LED-string-retrofit-IMG_0112-solarcell-hacking-05-20220226.JPG)

I really wanted to ensure that I understood the solar cell, and particularly the charging circuit for the Lithium Ion battery.  After spend more time researching for the integrated circuit than I should admit to (it was around 5 hours, but it was a snowy day and nothing else to do), I actually have relatively high confidence that I found the IC.  Please see the "datasheets" folder for the IC's PDF.  The datasheet's sample circuitry matched the solar cell's printed circuit board layout and passive components.  Given the cost of the solar cell lighting, I knew the IC must be dirt-cheap, and it is.

I contacted the manufacturer of the solar cell lighting, inquiring about the capacity of the internal Li-Ion battery.  After a couple days, I was informed that the battery has a capacity of 1200 milliamp-hours (mAH).

# Iteration #2B: Voltage conversion experimentation

Now armed with this information, it was time to design the power distribution from the front yard solar cells, to the back yard LED lighting.

First challenge: the back yard LED lighting was designed to run from three "AA" batteries thus 4.5 Volts.  But Li-Ion batteries have a lower 3.9 - 4.1 Volts level.  I therefore needed to do a voltage transformation to get to the necessary 4.5 Volts.

My first attempt was to place two hacked solar panels in parallel, then connect them thru the obligitory forward-bias diodes to prevent one solar cell's battery back-feeding the other solar cell's battery.  The diodes are critical for parallel-connected DC power sources, as their drain rates are never perfectly equal, and in a worst-case situation the absense of diodes can lead to overheating and possibly the smell of melting plastic and silicon.

I found a small, relatively efficient boost ("step-up") voltage switching converter, calibrated it to 4.5 Volts output and began running my power delivery duration tests.  Each morning, i would place the solar panels out on the front steps, to be charged through the day.  Then that evening, I would connect the solar cells as described to a single spare back yard LED lighting unit, moniting the converter voltage through the evening into the next day.

The LED lighting unit consumes approximately 100 milliamps (mA), so theoretically each 1200 milliamp-hour solar cell battery should supply about 12 hours of power, so for two batteries that should be about 24 hours.

Such idealized math rarely works out in the real world, and this was the case here.

Repeated experiments over a couple weeks showed that after about 14 hours, the solar cell batteries would begin to deplete and their voltage would drop.  The LEDs would begin to dim, and by 18 hours, the solar cell batteries had no charge left.

The problem is that the required diodes drop approximately 1/2 Volt, with 100 mA flowing through each diode.  That's pure wasted power.  And the switching boost voltage convert probably had an efficiency rating of perhaps 90-ish percent, so again more wasted power.

And in the back yard, I have three LED lighting units, each consuming 100 mA.

With this battery configuration, the front yard solar cells and batteries would only power the back yard LED lighting for one evening.  Solar cells have been around since the 1960's, so there has been a lot of time to improve them to require less and less sunlight to produce an equivalent power output.  If the next day was overcast, the batteries would still mostly or fully charge.  But if the next day was very cloudy and very little sunshine, then no LED illumination that evening.

Time to try something different ...

Buck ("step-down") switching voltage converters tend to be a little more efficient than their boost cousins.

![Buck step-down switching voltage converter](/images/analog-FOUND-IT-blingstar-solar-christmas-lights-LED-string-retrofit-IMG_0113-voltage-buck-down-converter-20220226.JPG)

So now if instead I configure the solar cell batteries to be in series, I can eliminate the need of the two diodes (and their associated power waste).

The resultant 4.1 x 2 or 8.2 Volt power supply was then bucked down to 4.5 Volts, and the experiments were repeated.

After a few rounds of "charge all day" then "drain all night" over the course of a week or so, the single spare backyard LED lighting unit consuming 100 mA would operate at 4.5 Volts for 21 or 22 hours.

So when dividing that time window by three, for the three actual backyard LED lighting units running for six hours, the solar cell batteries should still have some charge remaining the next morning.

# Iteration #2C: Electrical transmission lines

In order to get the front yard solar cell batteries' power to the back yard LED lighting units, i'll need to run some two-conductor insulated wire.

Determining the optimal diameter of the wire, called the "gage", specifically "American wire gage" (AWG), is part science and part art.

The smaller the gage, the larger the wire diameter, and the lower power loss due to the wire.

But as the gage size increases, the wire gets more expensive and more stiff and difficult to handle.

Plus although low voltage, the wire will be outside so I wanted double-insulated conductors.

After performing some calculations, and then reading some reviews, I settled on using 22 AWG twisted copper wire.

Toilette paper was definitely not the only supply chain disrupted during COVID, though it certainly got the most news coverage.

I began searching all the likely distribution channels for a 100 foot coil of 22 AWG wire, and began to panic.

"_Out of stock_"

"_Unavailable for the foreseeable future_"

"_Would you like to be placed on the backorder list?_"

No I don't want to be on the backorder list ... I just want to purchase my spool of wire!

Finally after more patient searching, I found a spool, and I should receive it in a couple days.  Without looking too closely, I added it to my online shopping cart and proceeded to checkout.

Then I saw the total bill.

"_Are you kidding me?!?!_"

Sigh ... I made the purchase, rationalizing that even with this gouging, I really had no alternative, and this next phase of my project would keep me sane during COVID and was still less expensive than a good therapist.

# Iteration #2D: Architecture decisions

My wire arrived on the scheduled day mid-week, but I knew this was going to turn into an all-day ordeal running and connecting the wire.

And whatever you do, make sure you measure not twice but three or four times, before cutting the wire to length!

First I installed the buck voltage converter into a relatively waterproof enclosure (more on that later):

![Hacked solar panel battery charger](/images/analog-FOUND-IT-blingstar-solar-christmas-lights-LED-string-retrofit-IMG_0206-buck-down-voltage-converter-in-enclosure-20220827.jpeg)

I placed the converter enclosure in the front yard, elevated by a couple bricks to try to keep it out of the snow, and connected the solar cells.

I then ran my 22 AWS wire up to a waterproof termination / distribution box, which would take in the power wire from the converter enclosure and connect that to three smaller, more discreet wires that would be fed to each of the three LED lighting units mounted on the columns of the covered patio roof.

When I originally attached the LED lighting controllers to the columns, I had a "50-50 shot" as to which column the unit with the LEDs spanning the cross beam should be mounted.  This was all done back when I was using the "AA" batteries, so the choice did not seem too relevant.

As you've probably guessed: the crossbeam LED light controller (and east column controller) were mounted on the east column, and the solar cell power wire and distribution enclosure were at the base of the west column.

Now, this sounds like a small concern, but turned out to be "_a significant (bad) decision which would prove to be difficult and labor-intensive to refactor_".

This is called an "_Architecture Decision_" ... and I blew it.

The covered patio area is actually quite tall.  In order to run the LED lighting, I needed to use my 9 foot wooden (AKA weighs a ton) step ladder.  Once again I dragged it out of the garage and around to the back yard, so that I could run the smaller, more discreet and aesthetic wire along the crossbar and down to now two LED lighting controllers, mounted on the east column.  The entire effort took close to an hour, to make things look nice.

Next, I connected stripped the smaller, more discreet wires, to begin connecting them to the two east column controllers.

Upon stripping the insulation, I noticed the actual copper wire itself was awfully small in diameter.  You see, I purchased a 50 foot white telephone extension wire.  Telephone wire has historically been 26 AWG, but these copper strands were definitely far smaller.

So now I'm concerned about the voltage drop occurring as now not one but two LED controllers, at 100 mA each or 200 mA total, would be traversing this tiny pair of wires.

I temporarily alligator-clipped the two LED controllers to the tiny pair of wires, and sure enough, instead of 4.5 Volts, the controllers were receiving 3.75 Volts, wasting almost 25% of the needed power across the tiny pair of wires.

But it was now mid-afternoon, and bitter cold in early February.  I could just barely feel the tips of my fingers, so I chose to move forward as-is, and complete the hookups of the LED controllers, and see how the lights' brightness looked that night after dark.

# Iteration #2E: Soldering iron gymnastics

I contemplated multiple ways to connect the power wires to the LED controllers.

I made the decision that there's "_no going back to battery-powered_" operation.

So I ran an extension cord, and got my trusty soldering iron.



